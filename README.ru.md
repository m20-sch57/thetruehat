# thetruehat
*Доступные языки: [на Английском](README.md), [на Русском](README.ru.md).*

TheTrueHat - это веб-приложение для игры в Шляпу. Вы можете играть в Шляпу со своими друзьями или организовать турнир по Шляпе.
Этот проект поддерживает веб-интерфейс для игры и сервер, который возьмёт на себя все технические детали.

## Играйте прямо сейчас!
Игра доступна прямо сейчас [тут](https://thetruehat.m20-sch57.site).

## Возможности
* Кроссплатформенность. Вы можете запустить сервер на Windows, Linux и Mac OS X, а веб-приложение поддерживает Google Chrome (ПК и Android), Mozilla Firefox (ПК и Android) и последнюю Opera (ПК и Android).
* Простота в использовании. Всё уже готово, чтобы начать прямо сейчас. Вам не нужно вникать во что-либо или писать какой-либо код.
* Хорошее быстродействие: этот проект написан на Node.js - одном из самых быстрых фреймворков.

## Быстрый старт
Осторожно. Не используйте эту инструкцию на продакшэне. Посмотрите нашу [документацию](docs/main.md) прежде.

### Установка
1. Установите [Node.js](https://nodejs.org/ru/download/)
1. Установите [Caddy v.1](https://caddyserver.com/v1/)
1. Скачайте репозиторий.
1. Добавте git hoot `post-checkout` (**исполняемый** файл `.git/hooks/post-checkout`) со следующим содержимым (см. также [здесь](version/Readme.md)):
    ```shell script
    #!/bin/bash
    exec version/post-checkout.hook
    ```
    Данный скрипт запускается при `checkout`, поэтому для корректной генерации файлов версий необходимо сделать `checkout`.
1. Запустите в консоли в директории проекта:
    ```shell script
    npm install --only=prod --no-fund
    ```
   
### Лёгкая настройка
1. Измените `Caddyfile` в директории проекта следующим образом:
    1. Замените `<project_dir>` на путь к проекту.
    1. Замените `<log_dir>` на путь для файла логов Caddy (например, путь к проекту).
    1. Замените `<error_dir>` на путь для файла ошибок Caddy (например, путь к проекту).
    1. Замените все `<port>` на какой-либо свободный порт.
    1. Замените все `<socket_port>` на какой-либо другой свободный порт.
1. Измените `config.json` в директории проекта следующим образом:
    1. Обновите значение по ключу `"port"` на Ваш `<socket_port>` параметр.

### Запуск и использование
1. Запустите в первой консоли с рабочей директорией в директории проекта:
    ```shell script
    caddy -pidfile=caddy.pid
    ```
1. Запустите во второй консоли с рабочей директорией в директории проекта:
    ```shell script
    node server.js
    ```
1. Перейдите по ссылке `http://localhost:<port>`, где `<port>` заменён на Ваш `<port>` параметр.
1. Развлекайтесь!

### Остановка
Просто остановите процессы в обеих консолях, которые Вы использовали для запуска проекта.

## Документация.
Вы можете посмотреть документацию [здесь](docs/main.ru.md).

## Благодарность
Мы хотим выразить благодарность за сотрудничество [проекту ЛКШ.Шляпа](https://the-hat.appspot.com/landing).

## Лицензия
Данный проект доступен по [лицензии MIT](LICENSE).

## Используемые разработки
- [Caddy v.1](https://caddyserver.com/v1/)
- [Node.js](https://nodejs.org/)
- [Express](https://expressjs.com/)
- [Socket.IO](https://socket.io/)
- [body-parser](https://github.com/expressjs/body-parser#readme)
- [yargs](https://yargs.js.org/)
- [po2json](https://github.com/mikeedwards/po2json)
- [gettext](https://github.com/guillaumepotier/gettext.js)
